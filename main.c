#include <stdint.h>
#include <stdio.h>
#include <string.h>

// This is test1.bin extracted using:
// xxd -i test1.bin
unsigned char test1_bin[] = {
    0xb7, 0x07, 0x01, 0x00, 0x93, 0x87, 0x87, 0x07, 0x13, 0x07, 0x80,
    0x04, 0xb7, 0x26, 0x00, 0x40, 0x23, 0x80, 0xe6, 0x00, 0x03, 0xc7,
    0x17, 0x00, 0x93, 0x87, 0x17, 0x00, 0xe3, 0x1a, 0x07, 0xfe, 0x67,
    0x80, 0x00, 0x00, 0x48, 0x65, 0x6c, 0x6c, 0x6f, 0x20, 0x52, 0x49,
    0x53, 0x43, 0x2d, 0x56, 0x21, 0x0a, 0x00};
unsigned int test1_bin_len = 51;

/* emulate RAM */
#define RAM_SIZE 0x10000
extern uint8_t ram[RAM_SIZE];

/* CPU state */
extern uint32_t pc;
extern uint32_t reg[32];
extern uint32_t ram_start;

void riscv_cpu_interp_x32(int n_cycles);

int main()
{
    // load program into ram
    memcpy(ram, test1_bin, test1_bin_len);

    ram_start = pc = 0x10054;
    reg[2] = 0x10054 + RAM_SIZE;  // stack pointer
    riscv_cpu_interp_x32(100);
}
